---
title: Riveでマウスを追いかけるアニメーションを作る
tags:
  - Web
  - animation
  - Rive
private: false
updated_at: '2025-12-23T23:37:22+09:00'
id: f5a1b460be45fe8b1de4
organization_url_name: null
slide: false
ignorePublish: false
---

# はじめに
Riveを初めて使う人がRiveを使ってアニメーションを作れるようになるまでの記事。
マウスを追いかけるアニメーションを作成する手順を細かめに説明します。
最後に付録としてwebサイトに組み込む部分も載せています。

↓完成イメージ

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/02dfb277-ab11-48c9-8ba6-78f54a0a6c10.gif" width="650">

## Riveとは
https://rive.app/

アプリやweb上で動くアニメーションを作成できるツール。

Riveのアニメーションはインタラクティブにクリックやホバー、イベントに対して反応してアニメーションを動かしたり、状態を管理することが可能。デスクトップアプリとweb版が存在する。（今回はWeb版を使用）

Notion AIのアイコンやDuolingoのアニメーションにも使われている。

**❗️注意**
アニメーションの作成は無料でできますが、エクスポートには有料版へのアップグレードが必要です。最も安いプランは月17ドル、年108ドルです。

# アニメーションを作っていく！
Riveにアカウントを作って作業開始。
### 丸や四角（シェイプ）を置く
`Create Artbord`からアートボードを作成。サイズはデフォルトの500*500。

アートボード作成後、上のナビゲーションからペンマーク✒️の横の矢印を選択して任意の形を選択。ドラック＆ドロップでアートボード上に配置する。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/f7fc825e-02f1-4108-ba2c-99a94b7640fe.png" width="650" height="auto">

下記のようにいい感じに配置してオブジェクトを作成する。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/53d13939-e1c3-4edb-ac9c-399c396f6e1b.png" width="650" height="auto">

👇参考値

|形|xy座標(X,Y)|大きさ(W,H)|
|-|-|-|
|HitBox（Rectangle）|(250,250)|(500,500)|
|Sclera（Ellipse）|(250,250)|(360,360)|
|Iris（Ellipse）|(250,250)|(190,190)|
|Highlight（Ellipse）|(290,210)|(20,50)|

HitBoxを非表示にする。左のサイドバーから目👁️のマークを押す。

Iris（黒目）とHighlightをグループ化する。サイドバーかアートボードから2つを選択して`右クリック > Wrap in > Group`を選択。

### オブジェクトにマウスを追いかけさせる
右側のサイドバー上部の`Animate`をクリックするとアニメーションタイムラインが出現。

**①Listenerアイテム追加**
HitBoxを選択後、ListenersからプラスボタンでListenerアイテムを追加。
何も選択していないと`Listener 1`というアイテムが出現する。その場合はリッスン対象を変更してください（②の後半部分）。

**②リッスンするマウス動作を選ぶ**
マウスが要素に入った時・出た時・クリックされた時・などいくつかオプションの種類がありますが、今回はマウスの動作に合わせてアニメーションを動かしたいので`Pointer Enter`を選択。
ここでイベントをリッスンするオブジェクトがHitBoxになっていなかったら変更してください。

**③黒目がマウスを追いかけるよう設定**
中央下部のエリアでアクションを設定する。もともとあるsetアクションを削除して`Align Target`アクションを設定する。動作の対象を選ぶために、`Target`を選択した後、IrisGroupを選択する。`Target`が`IrisGroup`になっていれば完了。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/b8f94ef9-e1d3-4465-a3eb-ca0e49fc8de6.png" width="650">

ここまでやったら動きを確認してみましょう！
再生ボタンを押すとアニメーションがスタートします。
HitBoxの範囲内に入るとマウスに黒目がついてきたらOKです。

### 動きを白目の中に留める
> Constraintsで黒目の動きを制限します。RiveのConstraintsとは、オブジェクトの動きをルールで制限して物理的な挙動を作り出してくれます。
今回はDistance Constraintを使います。Distanceは紐で引っ張られているような挙動になります。

まず動きの中心となるアンカーを設置します。空のグループを中心に設置してください。グループはナビゲーションバーの左から3つ目の`井`から選択してください。

Constraintsを設定します。IrisGroupを選択した後に、右側のサイドバーからConstraintsの`＋ > Distane`を選んでください。
スライダーアイコンから設定を開き各値を設定。
Strengthは制限の強さで100％だと設定した距離でピタッと止まる。値を下げていくほど距離外へ逆方向から引っ張られているように飛び出して動く。
`Target`は先ほど作成したGroupを設定する。設定方法は他と同様に、`Target`を選択した後に選びたいオブジェクトを選ぶ。
Distanceはアンカーからの距離を設定する。
Modeでルールを設定する。今回はオブジェクトの中心を囲内に納めたいので`Closer`を選択。範囲内に入れたくなければ`Futher`、円周上を移動させたければ`Exact`を選択する。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/3fb13c14-f416-4aa6-b775-5b7be9bf8b34.png" width="650">

動かしてみるとマウスを目で追うアニメーションが出来ていると思います！

## apendix1 : 状態をつける
ずっとマウスを追いかけているのは目が辛そうなので、オンオフをつけたいと思います。
AnimationsにTimelineを追加。既存のTimelineの名前をSleep、新しく追加した方をActiveとする。

### Timelineに静止位置を設定
Sleepタイムラインを選択、IrisGroupのPosition x,yの横にあるダイヤをクリックしてONにする。タイムラインにIrisGroupが現れて、`00:00`の部分にピンがあればOK。
青ダイヤ🔷はキーフレームONの状態であり、オブジェクトのプロパティを選択しているタイムラインに対して時間ごとに変化（アニメーション）させることができる。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/3d442214-11c7-4cbc-b86f-f101ee21dda8.png" width="650">

### 状態管理
InputsでBooleanを追加。Activeタイムラインをドラック＆ドロップ。Scleraオブジェクトを選択してListenerアイテムを追加する。Listenerイベントは`InputChange`で`Boolean 1`と`toggle`を選択、マウスオプションは`Click`。

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/cd0ff188-032b-4b2d-a5a3-3c50d2d2079e.png" width="650">

Layer1のタブのActiveからSleep、SleepからActiveへ矢印を引く。四角の近くへマウスを持っていくとガイドが現れるのでドラック＆ドロップで状態遷移の線を弾ける。矢印クリックで遷移の条件を設定できる。Sleep→Activeでは`Boolean1 - true`とし、Active→Sleepでは`Boolean2 - false`とする。
Durationを設定するとゆっくり状態が変わる。
画像はActive→Sleep

<img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3742368/e1e94a1e-10a1-4cc1-8b23-7a4fd4fb9022.png" width="650">

これでクリックで状態が変化して、目がマウスを追いかける/正面のみを向くを切り替えられるようになる。

## appendix2 : webアプリに組み込む
せっかくアニメーションを作ったのでWeb上で表示してみようと思います（有料）。
画面上部のExportから`.riv`ファイルをエクスポートして保存。

Reactで表示させます。`npm i --save @rive-app/react-canvas`でReactからRive を使うための公式ラッパーを入れる。
public直下に.rivファイルを置いた場合は下記のようになります。

```typescript
import { useRive } from '@rive-app/react-canvas';

function RiveComp() {
  const { RiveComponent } = useRive({
    src: '/rivefile.riv',
    stateMachines: "State Machine 1",
    autoplay:  true,
  });

  return (
    <RiveComponent style={{ width: 400, height: 400 }} />
  )
}
```

色を変えたり、白目も少し動かしたりと少し修正をしています。
github: https://github.com/z-fujimori/rive-preview-app

# 最後に
ここまでで、アニメーションを作成して、最終的にWebサイトへと組み込みました。
Riveの公式記事が動画しか見当たらず、私のような初心者🔰向けの記事も見当たらなかったので、操作方法を中心にまとめてみました。

Riveを触ってみてGUIの難しさに苦労しました。GUIはとにかくどこを操作すれば良いのか分からず選択項目が多くあるRiveは知見ゼロから始めるには大変でした、、、

下記参考にした資料です。その他にもRive Marketplaceにあるアニメーションも参考になるかもしれません。

Rive101 公式入門　61 ~ 63
https://www.youtube.com/playlist?list=PLujDTZWVDSsFGonP9kzAnvryowW098-p3
React × Rive
https://rive.app/docs/runtimes/react/react

